<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®šæ™‚ç‚¸å½ˆéŠæˆ²</title>
    <style>
        /* --- é é¢æ•´é«”æ¨£å¼ --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f8ff; /* æ„›éº—çµ²è— */
            color: #333;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        /* --- éŠæˆ²ä¸»å®¹å™¨ --- */
        .game-container {
            background-color: #ffffff;
            padding: 2em 3em;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 500px;
        }

        h1 {
            color: #d9534f; /* å±éšªç´…è‰² */
        }

        /* --- è¨ˆæ™‚å™¨é¡¯ç¤º --- */
        #timer-display {
            font-size: 6rem;
            font-weight: bold;
            color: #4CAF50; /* ç¶ è‰² */
            margin: 0.2em 0;
            letter-spacing: 5px;
        }

        /* --- éŠæˆ²è¨­å®šå€åŸŸ --- */
        .setup-area, .result-area {
            margin: 1.5em 0;
        }

        .setup-area label {
            font-size: 1.1em;
            margin-right: 10px;
        }

        input[type="number"], select {
            padding: 8px;
            font-size: 1em;
            border: 2px solid #ccc;
            border-radius: 5px;
        }

        /* --- æŒ‰éˆ•æ¨£å¼ --- */
        button {
            background-color: #5bc0de; /* è³‡è¨Šè—è‰² */
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.2em;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin: 5px;
        }

        button:hover {
            background-color: #31b0d5;
            transform: scale(1.05);
        }

        #start-btn {
            background-color: #4CAF50; /* ç¶ è‰² */
        }
        #start-btn:hover {
            background-color: #45a049;
        }

        /* --- éŠæˆ²ç‹€æ…‹è¨Šæ¯ --- */
        #status-message {
            font-size: 2em;
            font-weight: bold;
            color: #d9534f;
            height: 50px; /* é ç•™ç©ºé–“é˜²æ­¢ç•«é¢è·³å‹• */
        }

        /* --- ç´€éŒ„åˆ—è¡¨ --- */
        #history-list {
            list-style-type: none;
            padding: 0;
            text-align: left;
            max-width: 300px;
            margin: 1em auto;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
        }

        #history-list li {
            padding: 5px 10px;
            border-bottom: 1px solid #eee;
            font-size: 1.1em;
        }
        #history-list li:last-child {
            border-bottom: none;
        }
        
        /* --- ç”¨æ–¼éš±è—å…ƒç´ çš„ CSS Class --- */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <!-- éŠæˆ²ä¸»å®¹å™¨ -->
    <div class="game-container">
        <h1>ğŸ’£ å®šæ™‚ç‚¸å½ˆ ğŸ’£</h1>
        
        <!-- è¨ˆæ™‚å™¨é¡¯ç¤º -->
        <div id="timer-display">01:00</div>
        
        <!-- ç‹€æ…‹è¨Šæ¯ -->
        <div id="status-message"></div>

        <!-- éŠæˆ²è¨­å®šå€åŸŸ -->
        <div id="setup-area">
            <label for="time-input">éŠæˆ²æ™‚é–“ (ç§’):</label>
            <input type="number" id="time-input" value="60" min="5">
            <button id="start-btn">é–‹å§‹éŠæˆ²</button>
        </div>
        
        <!-- éŠæˆ²çµæŸå¾Œè¼¸å…¥å§“åçš„å€åŸŸ -->
        <div id="result-area" class="hidden">
            <h3>æ˜¯èª°æ‹¿åˆ°äº†ç‚¸å½ˆï¼Ÿ</h3>
            <select id="player-select"></select>
            <button id="submit-name-btn">è¨˜éŒ„å§“å</button>
        </div>

        <!-- å†ç©ä¸€è¼ªçš„æŒ‰éˆ• -->
        <div id="play-again-area" class="hidden">
             <button id="play-again-btn">å†ç©ä¸€è¼ªï¼</button>
        </div>
        
        <!-- ç´€éŒ„åˆ—è¡¨ -->
        <div id="history-area">
            <h4>ğŸ“œ è¢«ç‚¸åˆ°çš„åå–®ï¼š</h4>
            <ul id="history-list">
                <!-- å§“åå°‡æœƒå‹•æ…‹åŠ å…¥åˆ°é€™è£¡ -->
            </ul>
        </div>
    </div>

    <!-- JavaScript ç¨‹å¼é‚è¼¯ -->
    <script>
        // --- 1. å–å¾—æ‰€æœ‰éœ€è¦çš„ç¶²é å…ƒç´  ---
        const timerDisplay = document.getElementById('timer-display');
        const statusMessage = document.getElementById('status-message');
        const timeInput = document.getElementById('time-input');
        const startBtn = document.getElementById('start-btn');
        const playerSelect = document.getElementById('player-select');
        const submitNameBtn = document.getElementById('submit-name-btn');
        const playAgainBtn = document.getElementById('play-again-btn');

        const setupArea = document.getElementById('setup-area');
        const resultArea = document.getElementById('result-area');
        const playAgainArea = document.getElementById('play-again-area');
        const historyList = document.getElementById('history-list');

        // --- 2. éŠæˆ²æœƒç”¨åˆ°çš„è®Šæ•¸ ---
        let timer; // ç”¨ä¾†å­˜æ”¾ setInterval çš„ ID
        let timeLeft = 0;
        const playerNames = ['å…æ©', 'å…è–†', 'å¤ç¿°', 'ç­ ç¸¢', 'å¿ƒæ©', 'èŠŠå¦¤'];
        
        // å»ºç«‹éŸ³æ•ˆç‰©ä»¶ (ä½¿ç”¨ç¶²è·¯ä¸Šçš„å…è²»éŸ³æ•ˆä¾†æº)
        // æ³¨æ„ï¼šå¦‚æœé€™äº›é€£çµå¤±æ•ˆï¼ŒéŸ³æ•ˆæœƒç„¡æ³•æ’­æ”¾
        const tickSound = new Audio('https://www.soundjay.com/clock/sounds/clock-ticking-1.mp3');
        tickSound.loop = true; // è®“æ»´ç­”è²é‡è¤‡æ’­æ”¾
        const explosionSound = new Audio('https://www.soundjay.com/mechanical/sounds/explosion-01.mp3');

        // --- 3. éŠæˆ²æ ¸å¿ƒåŠŸèƒ½å‡½å¼ ---

        // æ ¼å¼åŒ–æ™‚é–“ï¼Œå°‡ç§’æ•¸è½‰æ›ç‚º MM:SS æ ¼å¼
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
        }

        // é–‹å§‹éŠæˆ²å‡½å¼
        function startGame() {
            // éš±è—è¨­å®šå€å’ŒæŒ‰éˆ•ï¼Œé¿å…é‡è¤‡é»æ“Š
            setupArea.classList.add('hidden');
            playAgainArea.classList.add('hidden');
            resultArea.classList.add('hidden');
            statusMessage.textContent = '';
            
            // å¾è¼¸å…¥æ¡†å–å¾—æ™‚é–“
            timeLeft = parseInt(timeInput.value, 10);
            if (isNaN(timeLeft) || timeLeft <= 0) {
                timeLeft = 60; // å¦‚æœè¼¸å…¥ç„¡æ•ˆï¼Œå‰‡ä½¿ç”¨é è¨­å€¼
            }
            
            // æ›´æ–°ç•«é¢ä¸Šçš„è¨ˆæ™‚å™¨
            timerDisplay.textContent = formatTime(timeLeft);
            timerDisplay.style.color = '#4CAF50'; // æ¢å¾©æ­£å¸¸ç¶ è‰²

            // é–‹å§‹æ’­æ”¾è¨ˆæ™‚è²
            tickSound.play();

            // è¨­å®šæ¯ç§’åŸ·è¡Œä¸€æ¬¡çš„å€’æ•¸è¨ˆæ™‚å™¨
            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = formatTime(timeLeft);

                // å¦‚æœæ™‚é–“åˆ°äº†
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        // éŠæˆ²çµæŸå‡½å¼
        function endGame() {
            clearInterval(timer); // åœæ­¢å€’æ•¸è¨ˆæ™‚å™¨
            tickSound.pause(); // åœæ­¢è¨ˆæ™‚è²
            tickSound.currentTime = 0; // å°‡éŸ³æª”é‡ç½®åˆ°é–‹é ­
            
            explosionSound.play(); // æ’­æ”¾çˆ†ç‚¸è²
            
            // é¡¯ç¤ºçˆ†ç‚¸è¨Šæ¯
            statusMessage.textContent = 'ğŸ’¥ è½Ÿéš†ï¼çˆ†ç‚¸äº†ï¼ ğŸ’¥';
            timerDisplay.style.color = '#d9534f'; // å°‡è¨ˆæ™‚å™¨è®Šç‚ºç´…è‰²
            
            // é¡¯ç¤ºè¼¸å…¥å§“åçš„å€åŸŸ
            resultArea.classList.remove('hidden');
        }

        // è¨˜éŒ„å§“åå‡½å¼
        function recordName() {
            const selectedPlayer = playerSelect.value;
            
            // å»ºç«‹ä¸€å€‹æ–°çš„åˆ—è¡¨é …ç›®
            const listItem = document.createElement('li');
            listItem.textContent = selectedPlayer;
            
            // åŠ å…¥åˆ°ç´€éŒ„åˆ—è¡¨ä¸­
            historyList.appendChild(listItem);
            
            // éš±è—å§“åè¼¸å…¥å€ï¼Œé¡¯ç¤º"å†ç©ä¸€è¼ª"æŒ‰éˆ•
            resultArea.classList.add('hidden');
            playAgainArea.classList.remove('hidden');
        }

        // é‡è¨­éŠæˆ²ä»¥é€²è¡Œä¸‹ä¸€è¼ª
        function resetGame() {
            statusMessage.textContent = '';
            timeLeft = parseInt(timeInput.value, 10);
            timerDisplay.textContent = formatTime(timeLeft);
            timerDisplay.style.color = '#4CAF50';

            playAgainArea.classList.add('hidden');
            setupArea.classList.remove('hidden'); // é¡¯ç¤ºè¨­å®šå€ï¼Œå¯ä»¥é‡æ–°è¨­å®šæ™‚é–“æˆ–ç›´æ¥é–‹å§‹
        }

        // --- 4. åˆå§‹åŒ–è¨­å®š ---
        
        // å‹•æ…‹ç”¢ç”Ÿä¸‹æ‹‰é¸å–®çš„é¸é …
        function populatePlayerSelect() {
            playerNames.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                playerSelect.appendChild(option);
            });
        }
        
        // é é¢è¼‰å…¥æ™‚ï¼Œè¨­å®šå¥½ç©å®¶åç¨±ä¸¦é¡¯ç¤ºé è¨­æ™‚é–“
        window.onload = () => {
            populatePlayerSelect();
            const initialTime = parseInt(timeInput.value, 10);
            timerDisplay.textContent = formatTime(initialTime);

            // --- 5. ç¶å®šæŒ‰éˆ•äº‹ä»¶ ---
            startBtn.addEventListener('click', startGame);
            submitNameBtn.addEventListener('click', recordName);
            playAgainBtn.addEventListener('click', resetGame);
        };
    </script>
</body>
</html>
